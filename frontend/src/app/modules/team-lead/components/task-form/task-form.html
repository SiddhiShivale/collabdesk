<div class="modal-backdrop" (click)="close.emit()"></div>
<div class="modal-content">
  <form [formGroup]="taskForm" (ngSubmit)="onSubmit()">
    <h2>Create New Task for {{ team.name }}</h2>
    <div class="form-group">
      <label for="title">Title</label>
      <input type="text" id="title" formControlName="title" class="form-control">
    </div>
    <div class="form-group">
      <label for="description">Description</label>
      <textarea id="description" formControlName="description" class="form-control"></textarea>
    </div>
    <div class="form-group">
      <label for="dueDate">Due Date</label>
      <input type="date" id="dueDate" formControlName="dueDate" class="form-control">
    </div>
    <div class="form-group">
      <label>Assign To (select one or more)</label>
      <div class="checkbox-group">
        <div *ngFor="let member of team.members">
          <label>
            <input type="checkbox" [value]="member.id" (change)="onAssigneeChange($event)">
            {{ member.name }}
          </label>
        </div>
      </div>
      <div *ngIf="taskForm.get('assigneeIds')?.invalid && taskForm.get('assigneeIds')?.touched" class="invalid-feedback">
        At least one team member must be assigned.
      </div>
    </div>
    <div *ngIf="errorMessage" class="alert alert-danger">{{ errorMessage }}</div>
    <div class="modal-actions">
      <button type="button" class="btn btn-secondary" (click)="close.emit()">Cancel</button>
      <button type="submit" class="btn btn-primary" [disabled]="taskForm.invalid">Create Task</button>
    </div>
  </form>
</div>